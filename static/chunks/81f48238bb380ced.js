(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39617,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(76009);e.i(36180);var r=e.i(98925),l=e.i(97815),i=e.i(18566);function d(){let{user:e}=(0,l.useAuth)(),d=(0,i.useRouter)(),[n,c]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[h,p]=(0,a.useState)(!1),[u,b]=(0,a.useState)({amount:"",type:"deposit",method:"Vodafone Cash",userEmail:"",status:"completed"});(0,a.useEffect)(()=>{if(!e)return;(async()=>{let t=await (0,r.getDoc)((0,r.doc)(s.db,"users",e.uid));if(t.exists()){let a=t.data();if("mohemad123hsak@gmail.com"!==e.email&&!a.adminPermissions?.manage_finance)return d.push("/admin")}else if("mohemad123hsak@gmail.com"!==e.email)return d.push("/admin")})();let t=(0,r.query)((0,r.collection)(s.db,"transactions"),(0,r.orderBy)("createdAt","desc")),a=(0,r.onSnapshot)(t,e=>{c(e.docs.map(e=>({id:e.id,...e.data()}))),m(!1)});return()=>a()},[e,d]);let g=n.filter(e=>"deposit"===e.type&&"completed"===e.status).reduce((e,t)=>e+Number(t.amount),0),f=n.filter(e=>"withdrawal"===e.type&&"completed"===e.status).reduce((e,t)=>e+Number(t.amount),0),j=g-f,y=async e=>{e.preventDefault();try{await (0,r.addDoc)((0,r.collection)(s.db,"transactions"),{amount:Number(u.amount),type:u.type,method:u.method,userEmail:u.userEmail,status:u.status,createdAt:(0,r.serverTimestamp)()}),await (0,r.addDoc)((0,r.collection)(s.db,"admin_notifications"),{title:"deposit"===u.type?"Ø¥ÙŠØ¯Ø§Ø¹ Ø¬Ø¯ÙŠØ¯":"Ø³Ø­Ø¨ Ø¬Ø¯ÙŠØ¯",message:`ØªÙ… ØªØ³Ø¬ÙŠÙ„ ${"deposit"===u.type?"Ø¥ÙŠØ¯Ø§Ø¹":"Ø³Ø­Ø¨"} Ø¨Ù‚ÙŠÙ…Ø© ${u.amount} EGP Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${u.userEmail} Ø¹Ø¨Ø± ${u.method}.`,type:"deposit",createdAt:(0,r.serverTimestamp)(),read:!1,userEmail:u.userEmail}),await (0,r.addDoc)((0,r.collection)(s.db,"recent_activity"),{title:"deposit"===u.type?"Ø¥ÙŠØ¯Ø§Ø¹":"Ø³Ø­Ø¨",description:`ØªÙ… ${"deposit"===u.type?"Ø¥ÙŠØ¯Ø§Ø¹":"Ø³Ø­Ø¨"} Ù…Ø¨Ù„Øº ${u.amount} EGP Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ${u.userEmail}.`,icon:"deposit"===u.type?"ðŸ’°":"ðŸ’¸",type:"financial",createdAt:(0,r.serverTimestamp)()}),p(!1),b({amount:"",type:"deposit",method:"Vodafone Cash",userEmail:"",status:"completed"})}catch(e){console.error("Error adding transaction:",e)}};return x?(0,t.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-[#D4AF37] border-t-transparent rounded-full animate-spin"})}):(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-black font-pharaoh tracking-widest text-[#FFD700]",children:"Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1 uppercase tracking-tighter",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª ÙˆØ§Ù„Ø³Ø­ÙˆØ¨Ø§Øª ÙÙŠ Ø§Ù„Ù…Ù…Ù„ÙƒØ©"})]}),(0,t.jsx)("button",{onClick:()=>p(!0),className:"bg-gradient-to-r from-[#D4AF37] to-[#FFD700] text-black font-black px-6 py-3 rounded-xl shadow-lg hover:scale-105 transition-all text-sm",children:"+ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(o,{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª",value:`${g.toLocaleString()} EGP`,icon:"ðŸ’°",color:"text-green-500"}),(0,t.jsx)(o,{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª",value:`${f.toLocaleString()} EGP`,icon:"ðŸ’¸",color:"text-red-500"}),(0,t.jsx)(o,{title:"ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ (Revenue)",value:`${j.toLocaleString()} EGP`,icon:"ðŸ‘‘",color:"text-[#FFD700]",glow:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-[#0a0a0a] border border-[#D4AF37]/20 rounded-3xl overflow-hidden shadow-2xl",children:[(0,t.jsx)("div",{className:"p-6 border-b border-[#D4AF37]/10 bg-[#111] flex justify-between items-center",children:(0,t.jsxs)("h3",{className:"text-lg font-bold text-[#FFD700] flex items-center gap-2",children:[(0,t.jsx)("span",{children:"ðŸ“¥"})," Ø¢Ø®Ø± Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª"]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm text-right",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-black/50 text-[#D4AF37] border-b border-[#D4AF37]/10",children:[(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©"}),(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-white/5",children:0===n.filter(e=>"deposit"===e.type).length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-10 text-center text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})}):n.filter(e=>"deposit"===e.type).slice(0,10).map(e=>(0,t.jsxs)("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium text-gray-300",children:e.userEmail}),(0,t.jsxs)("td",{className:"px-6 py-4 text-green-500 font-bold",children:["+",e.amount.toLocaleString()]}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.method}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-500 text-xs",children:e.createdAt?.toDate().toLocaleDateString("ar-EG")})]},e.id))})]})})]}),(0,t.jsxs)("div",{className:"bg-[#0a0a0a] border border-[#D4AF37]/20 rounded-3xl overflow-hidden shadow-2xl",children:[(0,t.jsx)("div",{className:"p-6 border-b border-[#D4AF37]/10 bg-[#111] flex justify-between items-center",children:(0,t.jsxs)("h3",{className:"text-lg font-bold text-[#FFD700] flex items-center gap-2",children:[(0,t.jsx)("span",{children:"ðŸ“¤"})," Ø¢Ø®Ø± Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª"]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm text-right",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-black/50 text-[#D4AF37] border-b border-[#D4AF37]/10",children:[(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©"}),(0,t.jsx)("th",{className:"px-6 py-4 font-black",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-white/5",children:0===n.filter(e=>"withdrawal"===e.type).length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-10 text-center text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø­ÙˆØ¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹"})}):n.filter(e=>"withdrawal"===e.type).slice(0,10).map(e=>(0,t.jsxs)("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium text-gray-300",children:e.userEmail}),(0,t.jsxs)("td",{className:"px-6 py-4 text-red-500 font-bold",children:["-",e.amount.toLocaleString()]}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.method}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-500 text-xs",children:e.createdAt?.toDate().toLocaleDateString("ar-EG")})]},e.id))})]})})]})]}),h&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"bg-[#0a0a0a] border border-[#D4AF37]/30 w-full max-w-md rounded-[40px] overflow-hidden shadow-[0_0_100px_rgba(212,175,55,0.2)]",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-[#D4AF37] to-[#FFD700] p-6 text-black font-black flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:"ðŸ›ï¸"})," ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©"]}),(0,t.jsx)("button",{onClick:()=>p(!1),className:"hover:scale-125 transition-transform text-2xl",children:"âœ•"})]}),(0,t.jsxs)("form",{onSubmit:y,className:"p-8 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>b({...u,type:"deposit"}),className:`py-3 rounded-xl font-bold transition-all ${"deposit"===u.type?"bg-green-500/20 border-2 border-green-500 text-green-500 shadow-[0_0_15px_rgba(34,197,94,0.2)]":"bg-white/5 border border-white/10 text-gray-500"}`,children:"Ø¥ÙŠØ¯Ø§Ø¹ ðŸ“¥"}),(0,t.jsx)("button",{type:"button",onClick:()=>b({...u,type:"withdrawal"}),className:`py-3 rounded-xl font-bold transition-all ${"withdrawal"===u.type?"bg-red-500/20 border-2 border-red-500 text-red-500 shadow-[0_0_15px_rgba(239,68,68,0.2)]":"bg-white/5 border border-white/10 text-gray-500"}`,children:"Ø³Ø­Ø¨ ðŸ“¤"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-[#D4AF37] uppercase tracking-widest px-1",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),(0,t.jsx)("input",{type:"email",required:!0,placeholder:"user@example.com",value:u.userEmail,onChange:e=>b({...u,userEmail:e.target.value}),className:"w-full bg-black border border-white/10 rounded-xl p-4 text-white focus:outline-none focus:border-[#D4AF37] transition-colors"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-[#D4AF37] uppercase tracking-widest px-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº (EGP)"}),(0,t.jsx)("input",{type:"number",required:!0,placeholder:"0.00",value:u.amount,onChange:e=>b({...u,amount:e.target.value}),className:"w-full bg-black border border-white/10 rounded-xl p-4 text-white focus:outline-none focus:border-[#D4AF37] transition-colors"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-[#D4AF37] uppercase tracking-widest px-1",children:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"}),(0,t.jsxs)("select",{value:u.method,onChange:e=>b({...u,method:e.target.value}),className:"w-full bg-black border border-white/10 rounded-xl p-4 text-white focus:outline-none focus:border-[#D4AF37] transition-colors appearance-none",children:[(0,t.jsx)("option",{value:"Vodafone Cash",children:"Vodafone Cash"}),(0,t.jsx)("option",{value:"Etisalat Cash",children:"Etisalat Cash"}),(0,t.jsx)("option",{value:"Orange Cash",children:"Orange Cash"}),(0,t.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer"})]})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-[#D4AF37] to-[#FFD700] text-black font-black py-4 rounded-2xl shadow-xl hover:shadow-[0_0_30px_rgba(212,175,55,0.3)] transition-all mt-4",children:"ØªØ£ÙƒÙŠØ¯ ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©"})]})]})})]})}function o({title:e,value:a,icon:s,color:r,glow:l=!1}){return(0,t.jsxs)("div",{className:`bg-[#0a0a0a] border border-[#D4AF37]/20 p-8 rounded-[40px] relative overflow-hidden group hover:border-[#D4AF37]/50 transition-all ${l?"shadow-[0_0_40px_rgba(212,175,55,0.1)]":""}`,children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center relative z-10",children:[(0,t.jsx)("span",{className:"text-4xl mb-4 group-hover:scale-125 transition-transform duration-500",children:s}),(0,t.jsx)("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2",children:e}),(0,t.jsx)("p",{className:`text-4xl font-black ${r} tracking-tighter`,children:a})]}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#D4AF37] opacity-[0.03] -mr-10 -mt-10 rounded-full blur-3xl"})]})}e.s(["default",()=>d])}]);